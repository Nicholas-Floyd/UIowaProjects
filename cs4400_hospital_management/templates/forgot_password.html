<!DOCTYPE html>
<html>
<head><title>Forgot Password</title></head>
<body>
    <h1>Forgot Password</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul>
            {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    <form method="POST" autocomplete="off">
        <label>Username:</label><br>
        <input type="text" name="username" required><br><br>

        <label>Security Question:</label><br>
        <select name="questionID" required>
            {% for q in questions %}
                <option value="{{ q.QuestionID }}">{{ q.QuestionText }}</option>
            {% endfor %}
        </select><br><br>

        <label>Answer:</label><br>
        <input type="text" name="answer" autocomplete="new-password" required><br><br>

        <label>New Password:</label><br>
        <input type="password" name="new_password" required><br><br>

        <label>Confirm New Password:</label><br>
        <input type="password" name="confirm_password" required><br><br>

        <button type="submit">Reset Password</button>
    </form>

    <br><a href="{{ url_for('login') }}">Back to Login</a>
</body>
</html>
